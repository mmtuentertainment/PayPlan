<!DOCTYPE html>
<html>
<head>
    <title>Inject Test Data - Chunk 4</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f9fafb;
        }
        h1 {
            color: #111827;
        }
        p {
            color: #6b7280;
            line-height: 1.6;
        }
        .success {
            background: #d1fae5;
            border: 1px solid #10b981;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Injecting Test Data - Chunk 4 Widgets</h1>
    <div class="success">
        <p><strong>âœ… Test data injected successfully!</strong></p>
        <p>You will be redirected to the dashboard in 2 seconds...</p>
    </div>
    <p>This script injects:</p>
    <ul>
        <li>3 categories (Groceries, Utilities, Rent)</li>
        <li>10 transactions (5 will show in Recent Transactions)</li>
        <li>4 recurring transactions (2 bills: due today & due in 2 days)</li>
        <li>3 goals (on-track, at-risk, completed)</li>
    </ul>

    <script>
        // Clear existing data
        localStorage.clear();

        // Inject categories
        localStorage.setItem('payplan_categories_v1', JSON.stringify({
          version: '1.0',
          categories: [
            { id: 'cat1', name: 'Groceries', iconName: 'shopping-cart', color: '#22c55e', isDefault: true, createdAt: '2025-10-01T00:00:00Z', updatedAt: '2025-10-01T00:00:00Z' },
            { id: 'cat2', name: 'Utilities', iconName: 'zap', color: '#eab308', isDefault: true, createdAt: '2025-10-01T00:00:00Z', updatedAt: '2025-10-01T00:00:00Z' },
            { id: 'cat3', name: 'Rent', iconName: 'home', color: '#dc2626', isDefault: true, createdAt: '2025-10-01T00:00:00Z', updatedAt: '2025-10-01T00:00:00Z' }
          ]
        }));

        // Inject 10 transactions (5 will show in Recent Transactions)
        const transactions = [];
        for (let i = 0; i < 10; i++) {
          const date = new Date();
          date.setDate(date.getDate() - i);

          // Alternate between expenses (positive) and income (negative)
          const isExpense = i % 2 === 0;
          const amount = isExpense ? (5000 + i * 1000) : -(10000 + i * 500); // in cents

          transactions.push({
            id: `txn${i}`,
            amount: amount,
            description: isExpense ? `Grocery Store Purchase ${i}` : `Salary Payment ${i}`,
            date: date.toISOString().slice(0, 10),
            categoryId: i % 3 === 0 ? 'cat1' : i % 3 === 1 ? 'cat2' : 'cat3',
            createdAt: date.toISOString()
          });
        }

        // Add recurring transactions for bills (2 occurrences each)
        const today = new Date();
        const yesterday = new Date(today);
        yesterday.setDate(yesterday.getDate() - 1);
        const thirtyDaysAgo = new Date(today);
        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);

        // Bill 1: Due today (recurring utility)
        transactions.push(
          { id: 'bill1a', amount: 10000, description: 'Electric Bill', date: thirtyDaysAgo.toISOString().slice(0, 10), categoryId: 'cat2', createdAt: thirtyDaysAgo.toISOString() },
          { id: 'bill1b', amount: 10000, description: 'Electric Bill', date: yesterday.toISOString().slice(0, 10), categoryId: 'cat2', createdAt: yesterday.toISOString() }
        );

        // Bill 2: Due in 2 days (recurring rent)
        const twoDaysAgo = new Date(today);
        twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
        const thirtyTwoDaysAgo = new Date(today);
        thirtyTwoDaysAgo.setDate(thirtyTwoDaysAgo.getDate() - 32);

        transactions.push(
          { id: 'bill2a', amount: 150000, description: 'Rent Payment', date: thirtyTwoDaysAgo.toISOString().slice(0, 10), categoryId: 'cat3', createdAt: thirtyTwoDaysAgo.toISOString() },
          { id: 'bill2b', amount: 150000, description: 'Rent Payment', date: twoDaysAgo.toISOString().slice(0, 10), categoryId: 'cat3', createdAt: twoDaysAgo.toISOString() }
        );

        localStorage.setItem('payplan_transactions_v1', JSON.stringify({
          version: '1.0',
          transactions
        }));

        // Inject 3 goals (on-track, at-risk, completed)
        const tenDaysFromNow = new Date(today);
        tenDaysFromNow.setDate(tenDaysFromNow.getDate() + 10);
        const fiveDaysFromNow = new Date(today);
        fiveDaysFromNow.setDate(fiveDaysFromNow.getDate() + 5);

        localStorage.setItem('payplan_goals_v1', JSON.stringify({
          version: '1.0',
          goals: [
            { id: 'goal1', name: 'Emergency Fund', targetAmount: 1000, currentAmount: 900, targetDate: tenDaysFromNow.toISOString(), createdAt: '2025-10-01T00:00:00Z' },
            { id: 'goal2', name: 'Vacation Fund', targetAmount: 2000, currentAmount: 600, targetDate: fiveDaysFromNow.toISOString(), createdAt: '2025-10-01T00:00:00Z' },
            { id: 'goal3', name: 'New Laptop', targetAmount: 1500, currentAmount: 1500, targetDate: null, createdAt: '2025-09-01T00:00:00Z' }
          ]
        }));

        console.log('âœ… Test data injected successfully!');
        console.log('ðŸ“Š Transactions:', transactions.length);
        console.log('ðŸŽ¯ Goals: 3');
        console.log('ðŸ“… Bills: 2 upcoming');

        // Redirect to dashboard
        setTimeout(() => window.location.href = '/', 2000);
    </script>
</body>
</html>
